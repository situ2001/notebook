(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{209:function(t,s,a){t.exports=a.p+"assets/img/0_BJ0YjCrj9RSruxbS.4c4761e0.png"},210:function(t,s,a){t.exports=a.p+"assets/img/event_loop_nodejs.e5de1bf5.png"},211:function(t,s){t.exports="data:image/png;base64,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"},212:function(t,s,a){t.exports=a.p+"assets/img/promise_executor.792493dc.jpg"},251:function(t,s,a){"use strict";a.r(s);var n=a(6),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h1",{attrs:{id:"asynchronous"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#asynchronous"}},[t._v("#")]),t._v(" Asynchronous")]),t._v(" "),n("h2",{attrs:{id:"intro"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#intro"}},[t._v("#")]),t._v(" Intro")]),t._v(" "),n("p",[t._v("一般代码是顺序执行的。但是，如果你的页面，要做一点时间长一点的事情(比如说网络请求，读取json等)。那么，在这些事情执行的时候，后面的语句就会在等待，此时整个页面就会冻住。直到执行完前面的语句。")]),t._v(" "),n("p",[t._v("一个例子就是"),n("code",[t._v("alert()")]),t._v("这个函数，在点击OK之前，后面的代码都不会被执行，这个函数可以很好地演示同步的缺点。")]),t._v(" "),n("p",[t._v("但是此处我们可以用异步，让这些耗时比较长的事情扔到后台执行，等执行完成后，处理callback")]),t._v(" "),n("p",[n("img",{attrs:{src:a(209),alt:"diagram"}})]),t._v(" "),n("h2",{attrs:{id:"callback"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#callback"}},[t._v("#")]),t._v(" Callback")]),t._v(" "),n("p",[t._v("回调函数就是一个函数，用来作为参数，来传给会在后台运行的函数。")]),t._v(" "),n("blockquote",[n("p",[t._v("Async callbacks are functions that are specified as arguments when calling a function which will start executing code in the background.")])]),t._v(" "),n("h2",{attrs:{id:"implementation"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#implementation"}},[t._v("#")]),t._v(" Implementation")]),t._v(" "),n("p",[t._v("js运行的主线程只有一条，但目前对于操作系统的理解不是很深刻，我只知道js是单线程非阻式的实现。")]),t._v(" "),n("p",[t._v("那大致是怎么样的呢？摘自MDN")]),t._v(" "),n("blockquote",[n("p",[t._v("Async operations like promises are put into an event queue, which runs after the main thread has finished processing so that they do not block subsequent JavaScript code from running. The queued operations will complete as soon as possible then return their results to the JavaScript environment.")])]),t._v(" "),n("p",[t._v("看起来要异步执行的操作，先是被存放在一个事件队列里头了，然后再在"),n("strong",[t._v("主运行线程空闲")]),t._v("的时候来执行。")]),t._v(" "),n("p",[t._v("我们也可以用一段代码来试一下，可以在循环"),n("code",[t._v("console.log()")]),t._v("输出114514次一个变量，然后设置一个3秒的"),n("code",[t._v("setTimeout()")]),t._v("来输出hello world")]),t._v(" "),n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Hello world"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("3000")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" i "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("114514")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("i"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("理论上三秒就能执行输出hello world了，但是等了十多秒，也就是for循环结束之后才输出。（这就是在主线程空闲时再执行）")]),t._v(" "),n("div",{staticClass:"language-shell extra-class"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token number"}},[t._v("114512")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("114513")]),t._v("\nHello world\n")])])]),n("p",[t._v("异步的任务是用线程池里头的后台线程来handle的。整个过程如图所示")]),t._v(" "),n("p",[n("img",{attrs:{src:a(210),alt:"Nodejs"}})]),t._v(" "),n("h2",{attrs:{id:"promise"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#promise"}},[t._v("#")]),t._v(" Promise")]),t._v(" "),n("p",[t._v("Promise都是异步的，这是ES2015引进来的新东西")]),t._v(" "),n("blockquote",[n("p",[t._v('In essence, it\'s the browser\'s way of saying "I promise to get back to you with the answer as soon as I can," hence the name "promise."')])]),t._v(" "),n("p",[t._v("Promise表示一个操作的中间状态，可以handle一个在未来才已知的量，在未来这个未知的量变为已知之后，就可以处理它了。")]),t._v(" "),n("h3",{attrs:{id:"stage"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#stage"}},[t._v("#")]),t._v(" Stage")]),t._v(" "),n("p",[t._v("Promise对象有三种状态: pending, fulfilled 和 rejected")]),t._v(" "),n("ul",[n("li",[t._v("pending: initial state, neither fulfilled nor rejected.")]),t._v(" "),n("li",[t._v("fulfilled: meaning that the operation was completed successfully.")]),t._v(" "),n("li",[t._v("rejected: meaning that the operation failed.")])]),t._v(" "),n("p",[n("img",{attrs:{src:a(211),alt:"Stage"}})]),t._v(" "),n("p",[t._v("由于方法"),n("code",[t._v("then()")]),t._v("与"),n("code",[t._v("catch()")]),t._v("与"),n("code",[t._v("finally()")]),t._v("都返回一个Promise，这个Promise的result呢...只有"),n("code",[t._v("then()")]),t._v("能更改Promise对象的resolved value。因此Promise可以被链式调用。像这样")]),t._v(" "),n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" calc "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Promise")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("resolve"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" reject")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("val")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" val "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("**")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("val")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" val "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("**")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("val")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" val "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("**")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("val")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("val"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 65536")]),t._v("\n")])])]),n("p",[t._v("其中，"),n("code",[t._v("then()")]),t._v("中的参数"),n("code",[t._v("onRejection")]),t._v("是可选的，error也可以由"),n("code",[t._v("catch(onRejection)")]),t._v("来handle")]),t._v(" "),n("h3",{attrs:{id:"instantiation"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#instantiation"}},[t._v("#")]),t._v(" Instantiation")]),t._v(" "),n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" promise "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Promise")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("resolve"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" reject")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// the function is executed automatically when the promise is constructed")]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// after 1 second signal that the job is done with the result "done"')]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"done"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// or done with the result "error"')]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// setTimeout(() => reject("error", 1000));')]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("p",[t._v("当Promise对象得到结果之后，必是下面两者之一")]),t._v(" "),n("ul",[n("li",[n("code",[t._v("resolve(value)")]),t._v(" — if the job finished successfully, with result "),n("code",[t._v("value")]),t._v(".")]),t._v(" "),n("li",[n("code",[t._v("reject(error)")]),t._v(" — if an error occurred, error is the error "),n("code",[t._v("object")]),t._v(".")])]),t._v(" "),n("p",[n("img",{attrs:{src:a(212),alt:"Executor"}})]),t._v(" "),n("h3",{attrs:{id:"examples"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#examples"}},[t._v("#")]),t._v(" Examples")]),t._v(" "),n("p",[t._v("由于Promise保证了是异步，因此就算是看起来可以马上被执行的函数，也只会在栈空了、过了一个clock-tick之后被执行")]),t._v(" "),n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" promiseA "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Promise")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("resolutionFunc"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("rejectionFunc")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolutionFunc")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("777")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// At this point, "promiseA" is already settled.')]),t._v("\npromiseA"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("val")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"asynchronous logging has val:"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("val"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nconsole"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"immediate logging"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// produces output in this order:")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// immediate logging")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// asynchronous logging has val: 777")]),t._v("\n")])])]),n("hr"),t._v(" "),n("ul",[n("li",[t._v("与callback的区别")])]),t._v(" "),n("blockquote",[n("p",[t._v("Promises have some similarities to old-style callbacks. "),n("strong",[t._v("They are essentially a returned object to which you attach callback functions, rather than having to pass callbacks into a function.")])])]),t._v(" "),n("p",[t._v("它们本质都是一个返回的对象，我们可以将回调函数附加到该对象上，而不必将回调作为参数传递给另一个函数。")]),t._v(" "),n("hr"),t._v(" "),n("h3",{attrs:{id:"async"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#async"}},[t._v("#")]),t._v(" async")]),t._v(" "),n("p",[t._v("加"),n("code",[t._v("async")]),t._v("的函数，就会是一个Promise-based function，返回值就会是一个Promise")]),t._v(" "),n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("hello")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Hello"')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("hello")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// Promise {<fulfilled>: "hello"}')]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("hello")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("value")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("value"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// hello")]),t._v("\n")])])]),n("h3",{attrs:{id:"await"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#await"}},[t._v("#")]),t._v(" await")]),t._v(" "),n("blockquote",[n("p",[t._v("The await operator is used to wait for a Promise")])]),t._v(" "),n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("rv"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" expression"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// rv: Returns the fulfilled value of the promise, or the value itself if it's not a Promise.")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// expression: A Promise or any value to wait for.")]),t._v("\n")])])]),n("p",[t._v("在Promise-based的函数调用前，加await，可以让code暂时停下，直到这个promise被fulfill，并返回结果的值，"),n("strong",[t._v("而不是Promise")])]),t._v(" "),n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// a function that returns a Promise")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolveAfter2Seconds")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("x")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Promise")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("resolve")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("x"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2000")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("f1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// works only inside async functions")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" x "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolveAfter2Seconds")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("x"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 10")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("f1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("p",[t._v("而如果把await去掉,就会打印出 "),n("code",[t._v("Promise {<pending>}")])]),t._v(" "),n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" x "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolveAfter2Seconds")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// await was removed")]),t._v("\n")])])]),n("p",[t._v("还可以直接get到thenable对象的值...thenable可以是一个对象，但是这个对象里头有"),n("code",[t._v("then")]),t._v("函数，并且函数的样子长得很像一个Promise的话。那"),n("code",[t._v("await")]),t._v("就会把它当成一个Promise。")]),t._v(" "),n("p",[t._v("一般可以用来做自定义")]),t._v(" "),n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("show")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("v")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("v"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Thenable")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("constructor")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("num")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("num "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" num"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("resolve"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" reject")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("show")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("resolve"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// [Function (anonymous)]")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("num "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 8")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Promise")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("resolve")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("result")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Thenable")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("result"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 4")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("show"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// shows 2 after 1000ms")]),t._v("\n")])])]),n("p",[n("code",[t._v("await")]),t._v("还可以把"),n("code",[t._v("reject()")]),t._v("的给catch住，不过暂时还不知道有什么用...")]),t._v(" "),n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("f")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" x "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" Promise"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("reject")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("e"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("114514")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("f")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 114514")]),t._v("\n")])])])])}),[],!1,null,null,null);s.default=e.exports}}]);