<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Problems | Situ Book</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/logo-book.svg">
    <link rel="stylesheet" href="/katex.min.css">
    <meta name="description" content="Taking notes">
    
    <link rel="preload" href="/assets/css/0.styles.7f9e08b5.css" as="style"><link rel="preload" href="/assets/js/app.ea6663fd.js" as="script"><link rel="preload" href="/assets/js/2.2ade0f41.js" as="script"><link rel="preload" href="/assets/js/41.d20b2d2a.js" as="script"><link rel="prefetch" href="/assets/js/10.f233493b.js"><link rel="prefetch" href="/assets/js/11.3f081569.js"><link rel="prefetch" href="/assets/js/12.a934fec2.js"><link rel="prefetch" href="/assets/js/13.d10f4f24.js"><link rel="prefetch" href="/assets/js/14.3c7e1479.js"><link rel="prefetch" href="/assets/js/15.e52f0048.js"><link rel="prefetch" href="/assets/js/16.113eb911.js"><link rel="prefetch" href="/assets/js/17.341fa188.js"><link rel="prefetch" href="/assets/js/18.b936b6a2.js"><link rel="prefetch" href="/assets/js/19.b9aed1f5.js"><link rel="prefetch" href="/assets/js/20.12f3b9c3.js"><link rel="prefetch" href="/assets/js/21.58c30670.js"><link rel="prefetch" href="/assets/js/22.354d558f.js"><link rel="prefetch" href="/assets/js/23.861c68ca.js"><link rel="prefetch" href="/assets/js/24.bc200e6d.js"><link rel="prefetch" href="/assets/js/25.1e9fe201.js"><link rel="prefetch" href="/assets/js/26.54e59082.js"><link rel="prefetch" href="/assets/js/27.f4ad160b.js"><link rel="prefetch" href="/assets/js/28.29ee3e98.js"><link rel="prefetch" href="/assets/js/29.bd6ee8b5.js"><link rel="prefetch" href="/assets/js/3.ec92e282.js"><link rel="prefetch" href="/assets/js/30.541f8167.js"><link rel="prefetch" href="/assets/js/31.037c3dc9.js"><link rel="prefetch" href="/assets/js/32.c0b955b2.js"><link rel="prefetch" href="/assets/js/33.979c85e9.js"><link rel="prefetch" href="/assets/js/34.d71a2d26.js"><link rel="prefetch" href="/assets/js/35.8db144e8.js"><link rel="prefetch" href="/assets/js/36.9f42b17c.js"><link rel="prefetch" href="/assets/js/37.d0ac2360.js"><link rel="prefetch" href="/assets/js/38.5e149ae7.js"><link rel="prefetch" href="/assets/js/39.e5f70a0f.js"><link rel="prefetch" href="/assets/js/4.f5690707.js"><link rel="prefetch" href="/assets/js/40.82590afe.js"><link rel="prefetch" href="/assets/js/42.72325b83.js"><link rel="prefetch" href="/assets/js/43.bf9e8524.js"><link rel="prefetch" href="/assets/js/44.7f8c150c.js"><link rel="prefetch" href="/assets/js/45.225d982c.js"><link rel="prefetch" href="/assets/js/46.1a4774f2.js"><link rel="prefetch" href="/assets/js/47.c0f2e358.js"><link rel="prefetch" href="/assets/js/48.ea0244d1.js"><link rel="prefetch" href="/assets/js/49.ef097b3d.js"><link rel="prefetch" href="/assets/js/5.19bca545.js"><link rel="prefetch" href="/assets/js/50.f82252cc.js"><link rel="prefetch" href="/assets/js/51.d1f682e9.js"><link rel="prefetch" href="/assets/js/52.30a40989.js"><link rel="prefetch" href="/assets/js/53.3f16a7b4.js"><link rel="prefetch" href="/assets/js/54.032b596d.js"><link rel="prefetch" href="/assets/js/55.47b9e5f8.js"><link rel="prefetch" href="/assets/js/56.b538550e.js"><link rel="prefetch" href="/assets/js/57.e21338dc.js"><link rel="prefetch" href="/assets/js/58.f95c603e.js"><link rel="prefetch" href="/assets/js/59.81e49b42.js"><link rel="prefetch" href="/assets/js/6.c9f59a92.js"><link rel="prefetch" href="/assets/js/7.a1840e06.js"><link rel="prefetch" href="/assets/js/8.3a9b8360.js"><link rel="prefetch" href="/assets/js/9.23617160.js">
    <link rel="stylesheet" href="/assets/css/0.styles.7f9e08b5.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Situ Book</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://blog.situ2001.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Blog
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://github.com/situ2001" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://blog.situ2001.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Blog
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://github.com/situ2001" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Tools</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Java</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>JavaScript</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/javascript/background.html" class="sidebar-link">Background</a></li><li><a href="/javascript/problems.html" aria-current="page" class="active sidebar-link">Problems</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/javascript/problems.html#strict-mode" class="sidebar-link">Strict mode</a></li><li class="sidebar-sub-header"><a href="/javascript/problems.html#falsy-values" class="sidebar-link">Falsy values</a></li><li class="sidebar-sub-header"><a href="/javascript/problems.html#operator" class="sidebar-link">Operator || &amp;&amp;</a></li><li class="sidebar-sub-header"><a href="/javascript/problems.html#值的比较" class="sidebar-link">值的比较</a></li><li class="sidebar-sub-header"><a href="/javascript/problems.html#global-object" class="sidebar-link">Global Object</a></li><li class="sidebar-sub-header"><a href="/javascript/problems.html#let" class="sidebar-link">let</a></li><li class="sidebar-sub-header"><a href="/javascript/problems.html#for-in-vs-for-of" class="sidebar-link">for in vs for of</a></li><li class="sidebar-sub-header"><a href="/javascript/problems.html#template-literals" class="sidebar-link">template literals</a></li><li class="sidebar-sub-header"><a href="/javascript/problems.html#文件即程序" class="sidebar-link">文件即程序</a></li></ul></li><li><a href="/javascript/common_function.html" class="sidebar-link">Common function</a></li><li><a href="/javascript/built_in_object.html" class="sidebar-link">Built-in Objects</a></li><li><a href="/javascript/object.html" class="sidebar-link">Object</a></li><li><a href="/javascript/function.html" class="sidebar-link">Function</a></li><li><a href="/javascript/class_and_module.html" class="sidebar-link">Class &amp; Module</a></li><li><a href="/javascript/asynchronous.html" class="sidebar-link">Asynchronous</a></li><li><a href="/javascript/iteration.html" class="sidebar-link">Iteration</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Python</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>C/C++</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>数据结构与算法</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Linux</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Git</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>HTTP</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>React</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Node.js</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>框架</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>课程</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="problems"><a href="#problems" class="header-anchor">#</a> Problems</h1> <p></p><div class="table-of-contents"><ul><li><a href="#problems">Problems</a><ul><li><a href="#strict-mode">Strict mode</a></li><li><a href="#falsy-values">Falsy values</a></li><li><a href="#operator">Operator || &amp;&amp;</a></li><li><a href="#值的比较">值的比较</a></li><li><a href="#global-object">Global Object</a></li><li><a href="#let">let</a></li><li><a href="#for-in-vs-for-of">for in vs for of</a></li><li><a href="#template-literals">template literals</a></li><li><a href="#文件即程序">文件即程序</a></li></ul></li></ul></div><p></p> <h2 id="strict-mode"><a href="#strict-mode" class="header-anchor">#</a> Strict mode</h2> <blockquote><p>Strict mode is like a linter reminding you how JS should be written to have the highest quality and best chance at performance</p></blockquote> <p>JS的严格模式，举个例子，在浏览器环境下，严格模式会使得global object变为<code>undefined</code>，而不是<code>Window</code></p> <p>启用方法如下，这条statement前若有代码，那么就会使严格模式不生效</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// only comments and whitespace are allowed</span>
<span class="token string">&quot;use strict&quot;</span><span class="token punctuation">;</span>
<span class="token comment">// code starts here</span>
</code></pre></div><p>当然也可以用在function的scope上，叫做<code>function-level strict mode</code>。比如这个</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// only comments and whitespace are allowed</span>
    <span class="token string">&quot;use strict&quot;</span><span class="token punctuation">;</span>
    <span class="token comment">// code starts here</span>
<span class="token punctuation">}</span>
</code></pre></div><p>不过ES6的module都是假定在strict mode下的，所以ES6文件的代码都是自动默认为strict mode的（为什么不全部JS文件都默认为严格模式呢？这会break the web）</p> <h2 id="falsy-values"><a href="#falsy-values" class="header-anchor">#</a> Falsy values</h2> <p>这里插入falsy value，为后面比较做铺垫</p> <p>下面这些值都是false</p> <ul><li><code>false</code></li> <li><code>null</code></li> <li><code>undefined</code></li> <li><code>NaN</code></li> <li><code>0</code> (zero)</li> <li><code>-0</code> (Number negative zero)</li> <li><code>0n</code> (BigInt zero)</li> <li>empty string (&quot;&quot; or '' or ``)</li></ul> <h2 id="operator"><a href="#operator" class="header-anchor">#</a> Operator || &amp;&amp;</h2> <p>与此同时，顺便插入跟其他常见语言行为有点不同的<code>&amp;&amp;</code>和<code>||</code>运算符运算规则</p> <table><thead><tr><th>operator</th> <th>meaning</th> <th>statement</th></tr></thead> <tbody><tr><td>``</td> <td>Logic OR</td> <td>If expr1 can be converted to true, returns expr1; else, returns expr2.</td></tr> <tr><td><code>&amp;&amp;</code></td> <td>Logic AND</td> <td>If expr1 can be converted to true, returns expr2; else, returns expr1.</td></tr></tbody></table> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token keyword">undefined</span> <span class="token operator">||</span> <span class="token number">114514</span><span class="token punctuation">;</span> <span class="token comment">// a = 114514</span>
<span class="token keyword">let</span> b <span class="token operator">=</span> <span class="token keyword">undefined</span> <span class="token operator">&amp;&amp;</span> <span class="token number">1919810</span><span class="token punctuation">;</span> <span class="token comment">// b = undefined</span>
<span class="token keyword">let</span> c <span class="token operator">=</span> <span class="token string">&quot;you&quot;</span> <span class="token operator">||</span> <span class="token string">&quot;me&quot;</span><span class="token punctuation">;</span> <span class="token comment">// c = you</span>
<span class="token keyword">let</span> d <span class="token operator">=</span> <span class="token string">&quot;you&quot;</span> <span class="token operator">&amp;&amp;</span> <span class="token string">&quot;me&quot;</span><span class="token punctuation">;</span> <span class="token comment">// d = me</span>
</code></pre></div><p>根据<strong>短路运算</strong>的规则来理解就行了，比如Logic OR，第一个true就扔回第一个，否则就会比较第二个，因此第一个false就会扔回第二个。Logic AND也是如此</p> <p>并且因为js用来判断false和true的是用falsy value和truthy value，所以使用if语句的时候，要注意哪些东西在js里头是falsy的。</p> <h2 id="值的比较"><a href="#值的比较" class="header-anchor">#</a> 值的比较</h2> <p>update：见<a href="https://blog.situ2001.com/contents/d2b42a9c0258/" target="_blank" rel="noopener noreferrer">博客<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="global-object"><a href="#global-object" class="header-anchor">#</a> Global Object</h2> <p>顾名思义就是全局对象。在浏览器下，全局变量(global variable)创建后会被作为是<code>Window</code>的一个property</p> <p>In web browser, when a variable defined with <code>var</code> keyword, they are created as the member of the global object.(Node.js does not have this case)</p> <table><thead><tr><th style="text-align:center;">Environment</th> <th style="text-align:center;">Global Object</th></tr></thead> <tbody><tr><td style="text-align:center;">Web browser</td> <td style="text-align:center;">Window</td></tr> <tr><td style="text-align:center;">Node.js</td> <td style="text-align:center;">global</td></tr></tbody></table> <p>For example</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// on a web browser</span>
<span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">114514</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> b <span class="token operator">=</span> <span class="token number">114514</span><span class="token punctuation">;</span>
<span class="token keyword">this</span><span class="token punctuation">;</span> <span class="token comment">// Window</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 114514</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// undefined</span>
<span class="token comment">// on node.js</span>
<span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">114514</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token number">114514</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// undefined</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// undefined</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// undefined</span>
</code></pre></div><h2 id="let"><a href="#let" class="header-anchor">#</a> let</h2> <p>了解这个之前可以了解一下js的scope，<a href="https://blog.situ2001.com/contents/d5c78114ba70/" target="_blank" rel="noopener noreferrer">文章点此<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <blockquote><p>The let statement declares a block-scoped local variable, optionally initializing it to a value.</p></blockquote> <p>跟var声明的变量的scope为函数或全局的这一点不一样，let声明的是个具有block-scope的本地变量，即它的作用域是在一个block内，并且在同一个块里面，我们<strong>不能重复声明</strong>同一个变量。比如我们这样做就会发生错误</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">switch</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">case</span> <span class="token number">0</span><span class="token operator">:</span>
    <span class="token keyword">let</span> foo<span class="token punctuation">;</span>
    <span class="token keyword">break</span><span class="token punctuation">;</span>

  <span class="token keyword">case</span> <span class="token number">1</span><span class="token operator">:</span>
    <span class="token keyword">let</span> foo<span class="token punctuation">;</span> <span class="token comment">// SyntaxError for redeclaration.</span>
    <span class="token keyword">break</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>而要做的，只需要把每个case后面的statement使用brace<code>{}</code>括起来就行了，比如</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">case</span> <span class="token number">0</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> foo<span class="token punctuation">;</span>
  <span class="token keyword">break</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><code>var</code>和<code>let</code>的行为都是差不多的，只是scope的不同，以及<code>let</code>有TDZ临时死区</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">varTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token punctuation">{</span>
    <span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>  <span class="token comment">// same variable!</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 2</span>
  <span class="token punctuation">}</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 2</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">letTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token punctuation">{</span>
    <span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>  <span class="token comment">// different variable</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 2</span>
  <span class="token punctuation">}</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 1</span>
<span class="token punctuation">}</span>
</code></pre></div><p><code>let</code>还能被用来创建<code>{}</code>scope的private variable，比如这个(其实<code>var</code>的话，利用closure+IIFE就行了)</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> Thing<span class="token punctuation">;</span>

<span class="token punctuation">{</span>
  <span class="token keyword">let</span> privateScope <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WeakMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> counter <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

  <span class="token function-variable function">Thing</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>someProperty <span class="token operator">=</span> <span class="token string">'foo'</span><span class="token punctuation">;</span>

    privateScope<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
      hidden<span class="token operator">:</span> <span class="token operator">++</span>counter<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token class-name">Thing</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">showPublic</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>someProperty<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token class-name">Thing</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">showPrivate</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> privateScope<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span>hidden<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> privateScope<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;undefined&quot;</span>

<span class="token keyword">var</span> thing <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thing</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>thing<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Thing {someProperty: &quot;foo&quot;}</span>

thing<span class="token punctuation">.</span><span class="token function">showPublic</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;foo&quot;</span>

thing<span class="token punctuation">.</span><span class="token function">showPrivate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1</span>
</code></pre></div><p>let不会在global object上面创建一个property</p> <blockquote><p>At the top level of programs and functions, let, unlike var, does not create a property on the global object.</p></blockquote> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token string">'global'</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> y <span class="token operator">=</span> <span class="token string">'global'</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;global&quot;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// undefined</span>
</code></pre></div><p>还有一个特性TDZ(temporal dead zone)，叫做临时死区。</p> <p>可以理解为在初始化之前被使用就会报错，而全局变量只会<code>undefined</code>，这是因为，虽然两者都有变量提升(即变量的声明位置被提到了该变量的顶层作用域的开头，比如var的就是全局作用域，let就是局部的)，但是var声明的变量，在到赋值语句前，只是<code>undefined</code>，而let的话会直接报错。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">{</span> <span class="token comment">// TDZ starts at beginning of scope</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>bar<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// undefined</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>foo<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ReferenceError</span>
  <span class="token keyword">var</span> bar <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> foo <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> <span class="token comment">// End of TDZ (for foo)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>与此同时，还有一个<code>const</code>，这个的行为跟<code>let</code>是差不多的，只不过<code>const</code>常量要在声明的时候赋值，且之后就不能更改赋的这个值了。</p> <blockquote><p>A third declaration form is const. It's like let but has an additional limitation that it must be given a value at the moment it's declared, and cannot be re-assigned a different value later.</p></blockquote> <h2 id="for-in-vs-for-of"><a href="#for-in-vs-for-of" class="header-anchor">#</a> for in vs for of</h2> <p><code>for ... in ...</code>，迭代的是一个对象的enumerable property name</p> <p><code>for ... of ...</code>，迭代的是一个对象的property value，然而限定了使用的对象，<strong>要是iteratable</strong>的才行，比如<code>Array</code>, <code>Map</code>, <code>Set</code>, <code>String</code>, <code>TypedArray</code>, <code>arguments</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token keyword">in</span> list<span class="token punctuation">)</span> <span class="token punctuation">{</span>
   console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;0&quot;, &quot;1&quot;, &quot;2&quot;,</span>
<span class="token punctuation">}</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token keyword">of</span> list<span class="token punctuation">)</span> <span class="token punctuation">{</span>
   console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;4&quot;, &quot;5&quot;, &quot;6&quot;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> pets <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&quot;Cat&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Dog&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Hamster&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
pets<span class="token punctuation">[</span><span class="token string">&quot;species&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;mammals&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> pet <span class="token keyword">in</span> pets<span class="token punctuation">)</span> <span class="token punctuation">{</span>
   console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>pet<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;species&quot;</span>
<span class="token punctuation">}</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> pet <span class="token keyword">of</span> pets<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>pet<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;Cat&quot;, &quot;Dog&quot;, &quot;Hamster&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><code>for..of</code>循环还可以这样，一般来说，JS内建的iterable都有下面几个方法：<code>keys()</code>, <code>values()</code>和<code>entries()</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">30</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> <span class="token punctuation">[</span>idx<span class="token punctuation">,</span>val<span class="token punctuation">]</span> <span class="token keyword">of</span> arr<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">[</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span> idx <span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">]: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span> val <span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// [0]: 10</span>
<span class="token comment">// [1]: 20</span>
<span class="token comment">// [2]: 30</span>
</code></pre></div><h2 id="template-literals"><a href="#template-literals" class="header-anchor">#</a> template literals</h2> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token string">'514'</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">114</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>str<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 114514</span>
<span class="token keyword">let</span> examScore <span class="token operator">=</span> <span class="token number">45</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> examHighestScore <span class="token operator">=</span> <span class="token number">70</span><span class="token punctuation">;</span>
examReport <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">You scored </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span> examScore <span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span> examHighestScore <span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> (</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span> Math<span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span><span class="token punctuation">(</span>examScore<span class="token operator">/</span>examHighestScore<span class="token operator">*</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">%). </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span> examScore <span class="token operator">&gt;=</span> <span class="token number">49</span> <span class="token operator">?</span> <span class="token string">'Well done, you passed!'</span> <span class="token operator">:</span> <span class="token string">'Bad luck, you didn\'t pass this time.'</span> <span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
</code></pre></div><h2 id="文件即程序"><a href="#文件即程序" class="header-anchor">#</a> 文件即程序</h2> <p>在JS里头，每一个文件就被当成一个<strong>独立</strong>的程序。多个js文件被加载之后，其实是每个单独的js文件通过<code>global scope</code>来共享它们之间的状态的，所以运行的时候它们就在一起工作了。（这就是网页有时候有多个js，但是一两个加载失败之后，网页的部分功能还能运作的原因）</p> <p>ES6之后加入了module这个东西，只要一个文件有<code>import</code>之类的语句，或者在HTML上用tag <code>&lt;script type=module&gt;</code>，那么这个文件就会被当为ES6模块，不过ES6模块还是被视作为一个单独的文件。一个模块被import的时候，工作起来还是那样，如下</p> <blockquote><p>Similar to how &quot;global scope&quot; allows standalone files to mix together at runtime, importing a module into another allows runtime interoperation between them.</p></blockquote></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/javascript/background.html" class="prev">
        Background
      </a></span> <span class="next"><a href="/javascript/common_function.html">
        Common function
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.ea6663fd.js" defer></script><script src="/assets/js/2.2ade0f41.js" defer></script><script src="/assets/js/41.d20b2d2a.js" defer></script>
  </body>
</html>
