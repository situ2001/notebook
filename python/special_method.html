<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>魔法函数 | Situ Book</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/logo-book.svg">
    <link rel="stylesheet" href="/katex.min.css">
    <meta name="description" content="Taking notes">
    
    <link rel="preload" href="/assets/css/0.styles.7f9e08b5.css" as="style"><link rel="preload" href="/assets/js/app.34dd56ca.js" as="script"><link rel="preload" href="/assets/js/2.0f29cea6.js" as="script"><link rel="preload" href="/assets/js/55.e08b7041.js" as="script"><link rel="prefetch" href="/assets/js/10.44e15066.js"><link rel="prefetch" href="/assets/js/11.158214ed.js"><link rel="prefetch" href="/assets/js/12.b86325b1.js"><link rel="prefetch" href="/assets/js/13.2dd6fa17.js"><link rel="prefetch" href="/assets/js/14.af761692.js"><link rel="prefetch" href="/assets/js/15.5865d46a.js"><link rel="prefetch" href="/assets/js/16.ac038bff.js"><link rel="prefetch" href="/assets/js/17.24e2a1bb.js"><link rel="prefetch" href="/assets/js/18.39b51189.js"><link rel="prefetch" href="/assets/js/19.70aaa107.js"><link rel="prefetch" href="/assets/js/20.82b0df86.js"><link rel="prefetch" href="/assets/js/21.df322807.js"><link rel="prefetch" href="/assets/js/22.5761aace.js"><link rel="prefetch" href="/assets/js/23.6f85dbbd.js"><link rel="prefetch" href="/assets/js/24.e2abb12e.js"><link rel="prefetch" href="/assets/js/25.4aaacdf8.js"><link rel="prefetch" href="/assets/js/26.e157ffc7.js"><link rel="prefetch" href="/assets/js/27.5bbac61d.js"><link rel="prefetch" href="/assets/js/28.75783886.js"><link rel="prefetch" href="/assets/js/29.6bccdc89.js"><link rel="prefetch" href="/assets/js/3.0d0a395d.js"><link rel="prefetch" href="/assets/js/30.35acffba.js"><link rel="prefetch" href="/assets/js/31.1dfdd8fc.js"><link rel="prefetch" href="/assets/js/32.8d1ae582.js"><link rel="prefetch" href="/assets/js/33.0ca1d42f.js"><link rel="prefetch" href="/assets/js/34.d71a2d26.js"><link rel="prefetch" href="/assets/js/35.e850a44b.js"><link rel="prefetch" href="/assets/js/36.dfbd23e9.js"><link rel="prefetch" href="/assets/js/37.c0858255.js"><link rel="prefetch" href="/assets/js/38.bf3c2427.js"><link rel="prefetch" href="/assets/js/39.8482a2e5.js"><link rel="prefetch" href="/assets/js/4.47fe8786.js"><link rel="prefetch" href="/assets/js/40.ff044e5e.js"><link rel="prefetch" href="/assets/js/41.b6c8334f.js"><link rel="prefetch" href="/assets/js/42.38f46a38.js"><link rel="prefetch" href="/assets/js/43.3990f234.js"><link rel="prefetch" href="/assets/js/44.4b5c0131.js"><link rel="prefetch" href="/assets/js/45.62ddb511.js"><link rel="prefetch" href="/assets/js/46.44a278b2.js"><link rel="prefetch" href="/assets/js/47.aae69144.js"><link rel="prefetch" href="/assets/js/48.bb9d109c.js"><link rel="prefetch" href="/assets/js/49.fe271d1b.js"><link rel="prefetch" href="/assets/js/5.09a55b96.js"><link rel="prefetch" href="/assets/js/50.6ef35595.js"><link rel="prefetch" href="/assets/js/51.9602841e.js"><link rel="prefetch" href="/assets/js/52.a46e79ba.js"><link rel="prefetch" href="/assets/js/53.ad8a1db9.js"><link rel="prefetch" href="/assets/js/54.fb18a5ba.js"><link rel="prefetch" href="/assets/js/56.3e00ff3a.js"><link rel="prefetch" href="/assets/js/57.84fcd18a.js"><link rel="prefetch" href="/assets/js/58.88145d2f.js"><link rel="prefetch" href="/assets/js/6.5732d7e2.js"><link rel="prefetch" href="/assets/js/7.55bb9ce4.js"><link rel="prefetch" href="/assets/js/8.4b5ad4d3.js"><link rel="prefetch" href="/assets/js/9.d4d86685.js">
    <link rel="stylesheet" href="/assets/css/0.styles.7f9e08b5.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Situ Book</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://blog.situ2001.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Blog
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://github.com/situ2001" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://blog.situ2001.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Blog
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://github.com/situ2001" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Tools</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Java</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JavaScript</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Python</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/python/rules_naming.html" class="sidebar-link">命名规范</a></li><li><a href="/python/built_in_things.html" class="sidebar-link">内建功能</a></li><li><a href="/python/special.html" class="sidebar-link">特有句法</a></li><li><a href="/python/special_method.html" aria-current="page" class="active sidebar-link">魔法函数</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/python/special_method.html#str" class="sidebar-link">str</a></li><li class="sidebar-sub-header"><a href="/python/special_method.html#获取属性" class="sidebar-link">获取属性</a></li><li class="sidebar-sub-header"><a href="/python/special_method.html#operator-overloading" class="sidebar-link">Operator overloading</a></li><li class="sidebar-sub-header"><a href="/python/special_method.html#ellipsis-slice" class="sidebar-link">Ellipsis &amp; slice</a></li></ul></li><li><a href="/python/problems.html" class="sidebar-link">问题记录</a></li><li><a href="/python/ducking_type.html" class="sidebar-link">鸭子类型</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>C/C++</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>数据结构与算法</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Linux</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Git</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>HTTP</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Node.js</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>框架</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>课程</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="魔法函数"><a href="#魔法函数" class="header-anchor">#</a> 魔法函数</h1> <p>总的来说，一般是<code>__</code>开头和结尾的，就是了。如<code>__init__</code>, <code>__str__</code>等</p> <h2 id="str"><a href="#str" class="header-anchor">#</a> str</h2> <p>就像是Java里头的<code>toString()</code></p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">Foo</span><span class="token punctuation">(</span><span class="token builtin">object</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token boolean">None</span><span class="token punctuation">:</span>
        <span class="token builtin">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">def</span> <span class="token function">__str__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">str</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token string">'Hello from foo...'</span>

<span class="token keyword">print</span> <span class="token punctuation">(</span>Foo<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment"># Hello from foo...</span>
</code></pre></div><h2 id="获取属性"><a href="#获取属性" class="header-anchor">#</a> 获取属性</h2> <p>python对象的属性可以通过属性<code>__dict__</code>来获得</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">Foo</span><span class="token punctuation">(</span><span class="token builtin">object</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token boolean">None</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>bar <span class="token operator">=</span> <span class="token number">114514</span>
        self<span class="token punctuation">.</span>bar1 <span class="token operator">=</span> <span class="token number">1919810</span>

<span class="token keyword">print</span> <span class="token punctuation">(</span>Foo<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__dict__<span class="token punctuation">)</span> <span class="token comment"># {'bar': 114514, 'bar1': 1919810}</span>
</code></pre></div><h2 id="operator-overloading"><a href="#operator-overloading" class="header-anchor">#</a> Operator overloading</h2> <p><a href="https://docs.python.org/3/reference/datamodel.html#emulating-numeric-types" target="_blank" rel="noopener noreferrer">官方链接<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>py通红也有运算符重载的操作，官方叫法叫做<code>Emulating numeric types</code>，通过实现相对应的方法，便可重载掉运算符</p> <blockquote><p>The following methods can be defined to emulate numeric objects. Methods corresponding to operations that are not supported by the particular kind of number implemented (e.g., bitwise operations for non-integral numbers) should be left undefined.</p></blockquote> <p>支持这些个<code>+, -, *, @, /, //, %, divmod(), pow(), **, &lt;&lt;, &gt;&gt;, &amp;, ^, |, +=, -=, *=, @=, /=, //=, %=, **=, &lt;&lt;=, &gt;&gt;=, &amp;=, ^=, |=</code>，并且还能重载Math里的一些方法...(这里不讨论)例如</p> <p><code>object.__add__(self, other)</code></p> <p><code>object.__radd__(self, other)</code></p> <p><code>object.__iadd__(self, other)</code></p> <p>分别是<code>a+b</code> <code>b+a</code> <code>+=</code>，没有实现的话就会返回一个<code>NotImplemented</code></p> <p>而对于其中<code>__rxxx__</code>的方法</p> <blockquote><p>These functions are only called if the left operand does not support the corresponding operation 3 and the operands are of different types. 4 For instance, to evaluate the expression x - y, where y is an instance of a class that has an <strong>rsub</strong>() method, y.<strong>rsub</strong>(x) is called if x.<strong>sub</strong>(y) returns NotImplemented.</p></blockquote> <p>例如</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">Circle</span><span class="token punctuation">(</span><span class="token builtin">object</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token boolean">None</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>radius <span class="token operator">=</span> <span class="token number">2</span>
    <span class="token keyword">def</span> <span class="token function">get_area</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> self<span class="token punctuation">.</span>radius <span class="token operator">*</span> self<span class="token punctuation">.</span>radius <span class="token operator">*</span> <span class="token number">3.14</span>
    <span class="token keyword">def</span> <span class="token function">__add__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> other<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> self<span class="token punctuation">.</span>get_area<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> other<span class="token punctuation">.</span>get_area<span class="token punctuation">(</span><span class="token punctuation">)</span>

c1 <span class="token operator">=</span> Circle<span class="token punctuation">(</span><span class="token punctuation">)</span>
c2 <span class="token operator">=</span> Circle<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">print</span> <span class="token punctuation">(</span>c1 <span class="token operator">+</span> c2<span class="token punctuation">)</span> <span class="token comment"># 25.12</span>
</code></pre></div><h2 id="ellipsis-slice"><a href="#ellipsis-slice" class="header-anchor">#</a> Ellipsis &amp; slice</h2> <p>铺垫，要讲下去，我们先要实现<code>__getitem__</code>方法，下面的内容才有意义（比如numpy就是实现了这个方法），比如这个，比如[1, 2, 3]就作为<code>k</code>给pass进<code>__getitem__</code>里面了，可以说是py里面的一种特殊的运算符重载操作</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">T</span><span class="token punctuation">(</span><span class="token builtin">object</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__getitem__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> k<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> k

<span class="token keyword">print</span> <span class="token punctuation">(</span>T<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">print</span> <span class="token punctuation">(</span>T<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">11</span><span class="token punctuation">:</span><span class="token number">45</span><span class="token punctuation">:</span><span class="token number">14</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">print</span> <span class="token punctuation">(</span>T<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">print</span> <span class="token punctuation">(</span>T<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">print</span> <span class="token punctuation">(</span>T<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">,</span> <span class="token number">114</span><span class="token punctuation">:</span><span class="token punctuation">,</span> <span class="token punctuation">:</span><span class="token number">514</span><span class="token punctuation">,</span> <span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token triple-quoted-string string">'''
(1, 2, 3)
slice(11, 45, 14)
(1, Ellipsis, 3)
Ellipsis
(1, Ellipsis, slice(114, None, None), slice(None, 514, None), slice(None, None, None))
'''</span>
</code></pre></div><p>普通的<code>[1, 2, 3]</code>就是得到了tuple<code>(1,2,3)</code></p> <p>又可以看到<code>[11:45:14]</code>在<code>__getitem__(self, k)</code>的作用下产生了一个slice对象，而slice对象的<code>__init__</code>是这样的</p> <p><code>class slice(start, stop[, step])</code></p> <p>这样一来就可以理解了<code>[11: 45: 14]</code>是从11开始到45结束（不包括），步进是14.</p> <p>这个玩意平时不出现，但是到了机器学习这，就经常出现了，拿出现频率最高的numpy来说一下吧，一般是出现在对高维数组的refinement上。</p> <p>首先我们创建了一个三维数组</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">import</span> numpy <span class="token keyword">as</span> np
x <span class="token operator">=</span> np<span class="token punctuation">.</span>arange<span class="token punctuation">(</span><span class="token number">27</span><span class="token punctuation">)</span><span class="token punctuation">.</span>reshape<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token triple-quoted-string string">'''
[[[ 0  1  2]
  [ 3  4  5]
  [ 6  7  8]]

 [[ 9 10 11]
  [12 13 14]
  [15 16 17]]

 [[18 19 20]
  [21 22 23]
  [24 25 26]]]
'''</span>
</code></pre></div><p>要refine?就用到了上面的那个神奇<code>__getitem__(self, k)</code>(numpy里面已经实现好了)，如果我们只要一个，比如<code>19</code>的话，那就是这样子来做一步一步来:<code>x[2][0][1]</code>。而如果我们要得到一维数组数组<code>[19]</code>的话那，直接<code>x[2, 0, 1]</code></p> <p>加入<code>:</code>呢？这就是slice切片了，<code>inclusive:exclusive</code>这个样子的，比如<code>0:</code>就是从0到最后一个元素(inclusive)，而<code>:2</code>就是<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn><mo>≤</mo><mi>e</mi><mi>l</mi><mi>e</mi><mi>m</mi><mi>e</mi><mi>n</mi><mi>t</mi><mo>&lt;</mo><mn>2</mn></mrow><annotation encoding="application/x-tex">0\leq element &lt; 2</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.78041em;vertical-align:-0.13597em;"></span><span class="mord">0</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.73354em;vertical-align:-0.0391em;"></span><span class="mord mathnormal">e</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">e</span><span class="mord mathnormal">m</span><span class="mord mathnormal">e</span><span class="mord mathnormal">n</span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span></span></span></span>了，同理<code>2:3</code>即<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn><mo>≤</mo><mi>e</mi><mi>l</mi><mi>e</mi><mi>m</mi><mi>e</mi><mi>n</mi><mi>t</mi><mo>&lt;</mo><mn>3</mn></mrow><annotation encoding="application/x-tex">2\leq element &lt; 3</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.78041em;vertical-align:-0.13597em;"></span><span class="mord">2</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.73354em;vertical-align:-0.0391em;"></span><span class="mord mathnormal">e</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">e</span><span class="mord mathnormal">m</span><span class="mord mathnormal">e</span><span class="mord mathnormal">n</span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">3</span></span></span></span>，一个<code>:</code>是啥，想必不用说了。上面也提到了。</p> <p>如果我们这样<code>x[:2, :, 1:]</code>切片，就是切成了这样，其实不用多说啥，划重点：看到上面<code>19</code>和<code>[19]</code>是怎么样refine的了吗？所以，总结规律，我们只需要<strong>按照正常的高维数组refinement的次序</strong>来思考怎么切，切哪里就行了。</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">print</span> <span class="token punctuation">(</span>x<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">:</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token triple-quoted-string string">'''
[[[ 1  2]
  [ 4  5] 
  [ 7  8]]

 [[10 11]
  [13 14]
  [16 17]]]
'''</span>
</code></pre></div><p>而那个Ellipsis而怎么理解呢？我觉得可以直接literally理解，就是“省略”之意。</p> <p>加入Ellipsis(其实是一个built-in constant)即<code>...</code>就是这样了，有一个五维的数组y，refinement本来是这样的:<code>y[:2, :, :, :, 3:]</code>就可以写成<code>[:2, ..., 3:]</code>了（在numpy的<strong>具体实现</strong>下），不愧就是Ellipsis省略之意啊。</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/python/special.html" class="prev">
        特有句法
      </a></span> <span class="next"><a href="/python/problems.html">
        问题记录
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.34dd56ca.js" defer></script><script src="/assets/js/2.0f29cea6.js" defer></script><script src="/assets/js/55.e08b7041.js" defer></script>
  </body>
</html>
